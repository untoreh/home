# DO NOT EDIT THIS FILE
#
# Create an .env file instead.
# See https://github.com/lardbit/nefarious#part-1
#####################################################
version: '2.4'

services:
  mediabox:
    image:
      alpine
    container_name: mediabox
    network_mode: host
    environment:
      - MONO_GC_PARAMS=max-heap-size=64m,nursery-size=32m
      - MONO_THREADS_PER_CPU=128
    #command:
      #- "sleep"
      #- "infinity"

  flaresolverr:
    extends:
      service: mediabox
    image: ghcr.io/flaresolverr/flaresolverr:latest
    container_name: flaresolverr
    environment:
      - LOG_LEVEL=info
    restart: unless-stopped
  jackett:
    extends:
      service: mediabox
    image: linuxserver/jackett
    container_name: jackett
    environment:
      - PUID=1000
      - PGID=1000
      - AUTO_UPDATE=true #optional
    volumes:
      - ./jackett-config:/config/Jackett
      - ./data/torrents:/downloads
    restart: unless-stopped
  jellyfin:
    extends:
      service: mediabox
    image: linuxserver/jellyfin
    container_name: jellyfin
    environment:
      - PUID=1000
      - PGID=1000
      - HOSTNAME=fra-mule
      # - JELLYFIN_PublishedServerUrl=192.168.0.5 #optional
    volumes:
      - ./jellyfin-config:/config
      - ./data:/data
      # - /opt/vc/lib:/opt/vc/lib #optional
    devices:
      - /dev/dri:/dev/dri #optional  transmission:
  transmission:
    extends:
      service: mediabox
    image: linuxserver/transmission
    container_name: transmission
    environment:
      - PUID=1000
      - PGID=1000
      - TRANSMISSION_WEB_HOME=/combustion-release/ #optional
    volumes:
      - ./transmission-config:/config
      - ./data:/data
      # - <path to watch folder>:/watch
    restart: unless-stopped
  transmission-cleaner:
    extends:
      service: mediabox
    image: linuxserver/transmission
    container_name: transmission-cleaner
    volumes:
      - ./transmission-config:/config
    entrypoint:
      - "/usr/bin/env"
      - "bash"
    command:
      - "/config/cleaner.sh"
  medusa:
    extends:
      service: mediabox
    image: pymedusa/medusa:latest
    container_name: medusa
    network_mode: host
    restart: unless-stopped
    ports:
      - 8081:8081
    volumes:
      - ./medusa:/config
      - ./data:/data
  cleaner:
    extends:
      service: mediabox
    image: alpine
    container_name: cleaner
    command:
     - "/cleaner/start.sh"
    restart: unless-stopped
    volumes:
     - ./media_cleaner:/cleaner
  simkl-medusa-sync:
    extends:
      service: mediabox
    image: untoreh/simkl-medusa-sync
    container_name: simkl-medusa-sync
    restart: unless-stopped
    volumes:
     - ./simkl_medusa_sync:/config
